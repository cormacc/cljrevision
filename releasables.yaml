:releasables:
  - :id: revision
    :revision:
      :src: src/rel/version.cljc
      :regex: (?<prefix>\(def current ")(?<major>\d+)(?<sep1>\.)(?<minor>\d+)(?<sep2>\.)(?<patch>[\w\d]+)(?<postfix>"\))
      :comment_prefix: ";;"
    # Quoting isn't necessary for string build steps, however it is for those including special characters
    # like $
    :build_steps:
      - "export BUILD_TIME=$(date)"
      - "echo Build started at: $BUILD_TIME"
      - "echo Current user: $USER"
      - "bb test:bb"
      - "echo Build completed successfully at $(date)"
      - bb test:bb
    #Define 3 build artefacts as test cases for 'deploy' and 'archive' tasks
    #Expect checksum file to be generated by default for first entry (where not specified explicitly)
    :artefacts:
      - :src: rel
      - :src: README.org
        :chk: false
      - :src: Rakefile
        :chk: true
    #Define two deployment destinations to verify multiple deployments work as intended
    :deploy:
      - :dest: ./test-output
      - :dest: ./test-output/2
      # And check if the new (v2.0.2) deployment steps work....
      - :steps:
          - mkdir -p ./test-output/3
          - touch ./test-output/3/bla.bla
